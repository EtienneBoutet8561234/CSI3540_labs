<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta viewport="width=device-width, initial-scale=1.0">
    <title>PacMan 1D</title>
</head>
<body>
    <h1>PacMan 1D</h1>
    <button id="startGame">Démarrer le jeu</button>
    <div id="gameBoard"></div>
    <p>Score: <span id="score">0</span></p>

    <script>
        let currentGame;

        function createGame(n) {
            let gameBoard = new Array(n).fill(".");
            const pacmanIndex = Math.floor(Math.random() * n);
            const ghostIndex = Math.floor(Math.random() * n);
            const fruitIndex = Math.floor(Math.random() * n);

            gameBoard[pacmanIndex] = "C";
            if (ghostIndex !== pacmanIndex) {
                gameBoard[ghostIndex] = "^";
            }
            if (fruitIndex !== pacmanIndex && fruitIndex !== ghostIndex) {
                gameBoard[fruitIndex] = "@";
            }

            return gameBoard;
        }
        function eatDot(index) {
    if (currentGame[index] === ".") {
        score++;
    }
}
        function updateGameBoard() {
            document.getElementById('gameBoard').innerText = currentGame.join(" ");
            ent.getElementById('score').innerText = score;
        }

        document.getElementById('startGame').addEventListener('click', function() {
            currentGame = createGame(10);
            updateGameBoard();
        });

        function moveLeft(game) {
    const pacmanIndex = game.indexOf("C");
    game[pacmanIndex] = ".";
    let newIndex = pacmanIndex === 0 ? game.length - 1 : pacmanIndex - 1;
    eatDot(newIndex);  // Mise à jour pour manger un point
    game[newIndex] = "C";
}

function moveRight(game) {
    const pacmanIndex = game.indexOf("C");
    game[pacmanIndex] = ".";
    let newIndex = pacmanIndex === game.length - 1 ? 0 : pacmanIndex + 1;
    eatDot(newIndex);  // Mise à jour pour manger un point
    game[newIndex] = "C";
}

        document.addEventListener('keydown', function(event) {
            if (event.key === "ArrowLeft") {
                moveLeft(currentGame);
                updateGameBoard();
            } else if (event.key === "ArrowRight") {
                moveRight(currentGame);
                updateGameBoard();
            }
        });
    </script>
</body>
</html>